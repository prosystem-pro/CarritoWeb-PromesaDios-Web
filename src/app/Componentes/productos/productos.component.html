<div class="container">
    <!-- Cabecera con nombre de categoría -->
    <div class="header">
        <button class="back-button" (click)="volver()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 12H5"></path>
                <path d="M12 19l-7-7 7-7"></path>
            </svg>
        </button>
        <div class="category-title">{{ nombreClasificacion | uppercase }}</div>
        <div class="cart-icon">
            <span class="cart-count">{{totalItemsCarrito || 0}}</span>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
        </div>
    </div>

    <!-- Controles de ordenación (como en la segunda imagen) -->
    <div class="sort-controls">
        <button class="sort-button">
            <span>A-Z</span>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M7 15l5 5 5-5"></path>
                <path d="M7 9l5-5 5 5"></path>
            </svg>
        </button>
    </div>

    <!-- Estado de carga -->
    <div *ngIf="cargando" class="loading">
        <div class="spinner"></div>
        <p>Cargando productos...</p>
    </div>

    <!-- Mensaje de error -->
    <div *ngIf="error" class="error-message">
        <p>{{ error }}</p>
    </div>

    <!-- Grilla de productos -->
    <div class="product-grid" *ngIf="!cargando">
        <div class="product-card" *ngFor="let producto of productos">
            <div class="product-image">
                <img [src]="producto.UrlImagen" [alt]="producto.NombreProducto">
            </div>

            <div class="product-info">
                <div class="product-price">{{producto.Moneda}} {{ producto.Precio }}</div>
                <div class="product-name">{{ producto.NombreProducto }}</div>

                <div class="quantity-control">
                    <button class="quantity-btn decrease-btn" (click)="decrementarCantidad(producto)">-</button>
                    <span class="quantity">{{ producto.cantidad || 1 }}</span>
                    <button class="quantity-btn increase-btn" (click)="incrementarCantidad(producto)">+</button>
                </div>

                <button class="add-button" (click)="agregarAlCarrito(producto)">
                    Agregar
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Si no hay productos -->
    <div *ngIf="!cargando && productos.length === 0" class="no-products">
        <p>No se encontraron productos en esta categoría.</p>
    </div>
</div>